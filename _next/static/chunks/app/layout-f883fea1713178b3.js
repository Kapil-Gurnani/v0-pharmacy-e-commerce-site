(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2708:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(2432);r(80364);var a=r(14793),s=r(46992),i=r(84963);let d=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:s,asChild:o=!1,...l}=e,c=o?a.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,i.cn)(d({variant:r,size:s,className:t})),...l})}},3612:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>d,_:()=>o});var n=r(2432),a=r(80364);let s=(0,a.createContext)(null),i="pharmacy_cart_v1";function d(e){let{children:t}=e,[r,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(i);e&&d(JSON.parse(e))}catch(e){}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem(i,JSON.stringify(r))}catch(e){}},[r]);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d(r=>{let n=r.findIndex(t=>t.id===e.id);if(n>=0){let e=[...r];return e[n]={...e[n],quantity:e[n].quantity+t},e}return[...r,{id:e.id,name:e.name,slug:e.slug,price:e.price,quantity:t}]})},l=e=>d(t=>t.filter(t=>t.id!==e)),c=(e,t)=>d(r=>r.map(r=>r.id===e?{...r,quantity:Math.max(1,Math.floor(t||1))}:r)),u=()=>d([]),h=(0,a.useMemo)(()=>r.reduce((e,t)=>e+t.quantity,0),[r]),m=(0,a.useMemo)(()=>r.reduce((e,t)=>e+t.price*t.quantity,0),[r]),f=(0,a.useMemo)(()=>({items:r,addItem:o,removeItem:l,updateQuantity:c,clearCart:u,itemCount:h,subtotal:m}),[r,h,m]);return(0,n.jsx)(s.Provider,{value:f,children:t})}function o(){let e=(0,a.useContext)(s);if(!e)throw Error("useCart must be used within CartProvider");return e}},30332:(e,t,r)=>{"use strict";r.d(t,{A:()=>v,AuthProvider:()=>p});var n=r(2432),a=r(80364);let s=(0,a.createContext)(void 0),i="pharmacy_user",d="pharmacy_accounts",o="pharmacy_pending_signup",l="pharmacy_otps";function c(e){return e.replace(/[^\d+]/g,"")}function u(e,t){try{let r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return t}}function h(e,t){localStorage.setItem(e,JSON.stringify(t))}function m(){return String(Math.floor(1e5+9e5*Math.random()))}function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5,n=u(l,{});n[e]={code:t,expires:Date.now()+r},h(l,n)}function x(e,t){let r=u(l,{}),n=r[e];if(!n)return!1;let a=n.code===t&&Date.now()<n.expires;return a&&(delete r[e],h(l,r)),a}function p(e){let{children:t}=e,[r,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(i);e&&l(JSON.parse(e))}catch(e){}},[]);let p=async e=>{let{name:t,phone:r,password:n}=e,a=c(r);if(u(d,{})[a])throw Error("Account already exists");let s=u(o,{});s[a]={name:t.trim(),password:n},h(o,s);let i=m();return f(a,i),{otp:i}},v=async e=>{let{phone:t,otp:r}=e,n=c(t);if(!x(n,r))throw Error("Invalid or expired OTP");let a=u(o,{}),s=a[n];if(!s)throw Error("No pending signup found");let m=u(d,{});m[n]={name:s.name,password:s.password},h(d,m),delete a[n],h(o,a);let f={phone:n,name:s.name};h(i,f),l(f)},g=async e=>{let{phone:t,password:r}=e,n=c(t),a=u(d,{})[n];if(!a||a.password!==r)throw Error("Invalid phone or password");let s=m();return f(n,s),{otp:s}},b=async e=>{let{phone:t,otp:r}=e,n=c(t);if(!x(n,r))throw Error("Invalid or expired OTP");let a=u(d,{})[n];if(!a)throw Error("Account not found");let s={phone:n,name:a.name};h(i,s),l(s)},j=()=>{localStorage.removeItem(i),l(null)},y=(0,a.useMemo)(()=>({user:r,requestSignup:p,confirmSignup:v,requestSignin:g,confirmSignin:b,signOut:j}),[r]);return(0,n.jsx)(s.Provider,{value:y,children:t})}function v(){let e=(0,a.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},31665:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var n=r(2432),a=r(32317),s=r.n(a),i=r(16782),d=r(99894),o=r(88055),l=r(94010),c=r(85578),u=r(2708),h=r(3612),m=r(30332),f=r(39262);r(80364);var x=r(51827),p=r(84963);function v(e){let{...t}=e;return(0,n.jsx)(x.bL,{"data-slot":"dropdown-menu",...t})}function g(e){let{...t}=e;return(0,n.jsx)(x.l9,{"data-slot":"dropdown-menu-trigger",...t})}function b(e){let{className:t,sideOffset:r=4,...a}=e;return(0,n.jsx)(x.ZL,{children:(0,n.jsx)(x.UC,{"data-slot":"dropdown-menu-content",sideOffset:r,className:(0,p.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function j(e){let{className:t,inset:r,variant:a="default",...s}=e;return(0,n.jsx)(x.q7,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":a,className:(0,p.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function y(e){let{className:t,...r}=e;return(0,n.jsx)(x.wv,{"data-slot":"dropdown-menu-separator",className:(0,p.cn)("bg-border -mx-1 my-1 h-px",t),...r})}let w=function(){let{itemCount:e}=(0,h._)(),{user:t,signOut:r}=(0,m.A)(),a=(0,f.usePathname)(),x=null==a?void 0:a.startsWith("/admin"),p=[{href:"/products",label:"Products"},{href:"/about",label:"About"},{href:"/contact",label:"Contact"},...t?[{href:"/orders",label:"My Orders"}]:[]],w=x?[{href:"/admin",label:"Dashboard"},{href:"/admin/orders",label:"Orders"},{href:"/admin/reports",label:"Reports"},{href:"/admin/products",label:"Products"},{href:"/admin/discounts",label:"Discounts"}]:p;return(0,n.jsx)("header",{className:"border-b bg-background",children:(0,n.jsxs)("nav",{"aria-label":"Primary",className:"mx-auto flex max-w-7xl min-w-0 items-center justify-between px-3 sm:px-6 lg:px-8 h-16",children:[(0,n.jsxs)(s(),{href:"/",className:"flex items-center gap-2 font-semibold",children:[(0,n.jsx)(i.A,{className:"h-5 w-5 text-primary","aria-hidden":!0}),(0,n.jsx)("span",{className:"text-pretty",children:"Vellacure"})]}),(0,n.jsx)("ul",{className:"hidden items-center gap-6 md:flex",children:w.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(s(),{className:"hover:text-primary",href:e.href,children:e.label})},e.href))}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsxs)(v,{children:[(0,n.jsx)(g,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon","aria-label":"Open menu",children:(0,n.jsx)(d.A,{className:"h-5 w-5"})})}),(0,n.jsxs)(b,{align:"end",className:"w-56",children:[w.map(e=>(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(s(),{href:e.href,children:e.label})},e.href)),!x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{}),(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(s(),{href:"/contact",children:"Help"})})]}),(0,n.jsx)(y,{}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{disabled:!0,children:t.phone}),(0,n.jsx)(j,{onClick:r,children:"Sign out"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(s(),{href:"/login",children:"Sign in"})}),(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(s(),{href:"/signup",children:"Sign up"})})]}),!x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{}),(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(s(),{href:"/cart",children:"View cart"})})]})]})]})}),(0,n.jsxs)("div",{className:"hidden items-center gap-2 md:flex",children:[!x&&(0,n.jsx)(u.$,{variant:"outline",size:"sm",asChild:!0,children:(0,n.jsxs)(s(),{href:"/contact","aria-label":"Contact",children:[(0,n.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Help"]})}),t?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"hidden text-sm text-muted-foreground md:inline",children:t.phone}),(0,n.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:r,"aria-label":"Sign out",children:[(0,n.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,n.jsx)(s(),{href:"/login",children:"Sign in"})}),(0,n.jsx)(u.$,{size:"sm",asChild:!0,children:(0,n.jsx)(s(),{href:"/signup",children:"Sign up"})})]})]}),!x&&(0,n.jsx)(s(),{href:"/cart","aria-label":"Cart with ".concat(e," item").concat(1===e?"":"s"),children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.$,{variant:"ghost",size:"icon",children:(0,n.jsx)(c.A,{className:"h-5 w-5"})}),e>0&&(0,n.jsx)("span",{"aria-hidden":!0,className:"absolute -right-1 -top-1 rounded-full bg-primary px-1.5 py-0.5 text-[10px] font-medium text-primary-foreground",children:e})]})})]})]})})}},70814:()=>{},84963:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(12126),a=r(68441);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},86999:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,70814,23)),Promise.resolve().then(r.bind(r,30332)),Promise.resolve().then(r.bind(r,3612)),Promise.resolve().then(r.bind(r,31665)),Promise.resolve().then(r.bind(r,88455)),Promise.resolve().then(r.t.bind(r,32317,23)),Promise.resolve().then(r.t.bind(r,25996,23)),Promise.resolve().then(r.t.bind(r,9436,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[337,438,317,251,429,677,22,956,358],()=>t(86999)),_N_E=e.O()}]);